# Mini Query Builder v2.0 - KullanÄ±m KÄ±lavuzu

## v2.0'deki Yenilikler

Bu sÃ¼rÃ¼m SOLID prensiplerini takip eden bÃ¼yÃ¼k bir refactoring iÃ§eriyor ve birÃ§ok yeni Ã¶zellik sunuyor:

### ğŸš€ Yeni Ã–zellikler

#### 1. SÄ±nÄ±f TabanlÄ± Query Builder'lar

ArtÄ±k daha akÄ±cÄ± API iÃ§in sÄ±nÄ±f tabanlÄ± query builder'larÄ± kullanabilirsiniz:

```typescript
import { queryBuilderFactory } from "mini-query-builder";

// AkÄ±cÄ± API ile SELECT
const result = queryBuilderFactory
  .createSelect(User)
  .where({ status: "active" })
  .orderBy("name", "ASC")
  .limit(10)
  .build();

// AkÄ±cÄ± API ile UPDATE
const updateResult = queryBuilderFactory
  .createUpdate(User)
  .set({ status: "inactive" })
  .where({ id: { $gt: 100 } })
  .build();
```

#### 2. Ortak Transformer'lar

YaygÄ±n veri tÃ¼rleri iÃ§in Ã¶nceden oluÅŸturulmuÅŸ transformer'lar:

```typescript
import { CommonTransformers } from 'mini-query-builder';

@Column({
  name: 'settings',
  transformer: CommonTransformers.JSON // Objeler ve diziler iÃ§in
})
settings: UserSettings;

@Column({
  name: 'tags',
  transformer: CommonTransformers.STRING_ARRAY // String dizileri iÃ§in
})
tags: string[];

@Column({
  name: 'scores',
  transformer: CommonTransformers.NUMBER_ARRAY // SayÄ± dizileri iÃ§in
})
scores: number[];
```

#### 3. GeliÅŸmiÅŸ Tip GÃ¼venliÄŸi

Daha iyi intellisense ile geliÅŸtirilmiÅŸ TypeScript desteÄŸi:

```typescript
// WHERE cÃ¼mleleri iÃ§in gÃ¼Ã§lÃ¼ tipleme
const query = selectQuery(User, {
  where: {
    age: { $gte: 18 }, // âœ… GeÃ§erli
    name: { $like: "%john%" }, // âœ… GeÃ§erli
    // email: { $like: 123 }   // âŒ TypeScript hatasÄ±
  },
});
```

#### 4. Daha Ä°yi Hata YÃ¶netimi

KapsamlÄ± hata tÃ¼rleri:

```typescript
import {
  MetadataNotFoundError,
  InvalidRelationError,
} from "mini-query-builder";

try {
  const query = selectQuery(UnknownEntity);
} catch (error) {
  if (error instanceof MetadataNotFoundError) {
    console.log("Entity uygun ÅŸekilde decorate edilmemiÅŸ");
  }
}
```

#### 5. GeliÅŸmiÅŸ BaseEntity

Daha fazla yardÄ±mcÄ± metot:

```typescript
const user = new User();
user.name = "John";

// DÃ¼z objeye dÃ¶nÃ¼ÅŸtÃ¼r
const plain = user.toPlain();

// Entity'yi klonla
const clone = user.clone();

// Kaydetmeden Ã¶nce doÄŸrula
user.validate();
```

### ğŸ—ï¸ Mimari Ä°yileÅŸtirmeler

#### SOLID Prensipleri UygulandÄ±

- **Tek Sorumluluk**: Her sÄ±nÄ±fÄ±n tek ve net bir amacÄ± var
- **AÃ§Ä±k/KapalÄ±**: Mevcut kodu deÄŸiÅŸtirmeden geniÅŸletilebilir
- **Liskov Yerine GeÃ§me**: Interface'ler gÃ¼venle deÄŸiÅŸtirilebilir
- **Interface AyrÄ±mÄ±**: KÃ¼Ã§Ã¼k, odaklanmÄ±ÅŸ interface'ler
- **BaÄŸÄ±mlÄ±lÄ±k Tersine Ã‡evirme**: Somut sÄ±nÄ±flara deÄŸil, soyutlamalara baÄŸÄ±mlÄ±

#### Yeni Query OperatÃ¶rleri

GeliÅŸmiÅŸ WHERE cÃ¼mlesi operatÃ¶rleri:

```typescript
const queries = selectQuery(User, {
  where: {
    age: { $gte: 18 }, // BÃ¼yÃ¼k veya eÅŸit
    status: { $in: ["active", "pending"] }, // IN cÃ¼mlesi
    email: { $null: false }, // NOT NULL
    name: { $not: "admin" }, // EÅÄ°T DEÄÄ°L
  },
});
```

### ğŸ“š GeÃ§iÅŸ KÄ±lavuzu

#### Mevcut KullanÄ±cÄ±lar Ä°Ã§in

TÃ¼m mevcut kod deÄŸiÅŸiklik olmadan Ã§alÄ±ÅŸmaya devam eder:

```typescript
// Bu hala aynÄ± ÅŸekilde Ã§alÄ±ÅŸÄ±r
const query = selectQuery(User, {
  where: { id: 1 },
  relations: ["posts"],
});
```

#### Ã–nerilen GÃ¼ncellemeler

Yeni kod iÃ§in sÄ±nÄ±f tabanlÄ± yaklaÅŸÄ±mÄ± tercih edin:

```typescript
// Eski yol (hala destekleniyor)
const oldQuery = selectQuery(User, { where: { id: 1 } });

// Yeni yol (Ã¶nerilen)
const newQuery = queryBuilderFactory
  .createSelect(User)
  .where({ id: 1 })
  .build();
```

### ğŸ”§ GeliÅŸmiÅŸ KullanÄ±m

#### Ã–zel Transformer'lar

Kendi transformer'larÄ±nÄ±zÄ± oluÅŸturun:

```typescript
const customTransformer: IValueTransformer<MyType, string> = {
  to: (value: MyType) => value.serialize(),
  from: (value: string) => MyType.deserialize(value),
};
```

#### Ã–zel OperatÃ¶rler

WHERE cÃ¼mlesi operatÃ¶rlerini geniÅŸletin:

```typescript
import { OperatorRegistry } from "mini-query-builder";

OperatorRegistry.register("$custom", {
  handle: (columnName, operand, transformer) => ({
    condition: `${columnName} CUSTOM ?`,
    params: [transformer(operand)],
  }),
});
```

### ğŸ› Hata DÃ¼zeltmeleri

- DÃ¶ngÃ¼sel baÄŸÄ±mlÄ±lÄ±k sorunlarÄ± dÃ¼zeltildi
- Bellek kullanÄ±mÄ± iyileÅŸtirildi
- Daha iyi hata mesajlarÄ±
- GeliÅŸmiÅŸ tip Ã§Ä±karÄ±mÄ±

### ğŸš€ Performans Ä°yileÅŸtirmeleri

- Daha hÄ±zlÄ± query oluÅŸturma
- AzaltÄ±lmÄ±ÅŸ bundle boyutu
- Daha iyi tree shaking desteÄŸi
- Optimize edilmiÅŸ metadata depolama

## Geriye Uyumluluk

TÃ¼m mevcut API'ler tam iÅŸlevselliÄŸini koruyor. Bu, v1.0 koduyla uyumluluÄŸu korurken yeni Ã¶zellikler ekleyen **deÄŸiÅŸiklik yapmayan** bir gÃ¼ncellemedir.
